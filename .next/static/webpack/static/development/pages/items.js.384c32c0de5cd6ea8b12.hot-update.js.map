{"version":3,"file":"static/webpack/static/development/pages/items.js.384c32c0de5cd6ea8b12.hot-update.js","sources":["webpack:///./components/DeleteItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport { ALL_ITEMS_QUERY } from './Items';\n\n\nconst DELETE_ITEM_MUTATION = gql`\n    mutation DELETE_ITEM_MUTATION($id: ID!) {\n        deleteItem(id: $id) {\n            id\n        }\n    }\n`;\n\nclass DeleteItem extends Component {\n    update = (cache, payload) => {\n        //manually update the cache on the client so it matches the server\n        // 1. Read the cache for the items we want\n        const data = cache.readQuery({ query: ALL_ITEMS_QUERY });\n        console.log(data, payload)\n        //2. Filter the item out\n        data.items = data.items.filter(item => item.id !== payload.data.deleteItem.id);\n        //3. Put the other items back in the cache\n        cache.writeQuery({ query: ALL_ITEMS_QUERY, data });\n\n    }\n    render() {\n        return (\n                <Mutation \n                    mutation={DELETE_ITEM_MUTATION} \n                    variables={{id: this.props.id}}\n                    update={this.update}\n                    >\n                    {(deleteItem, { error }) => (\n                        <button onClick={ () => {\n                                if (confirm('Are you sure you want to delete this?')){\n                                    deleteItem();\n                                }\n                            }}>{this.props.children}</button>\n                    )}\n                </Mutation>\n        );\n    }\n}\n\nexport default DeleteItem;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAGA;AACA;AAOA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;;;;;;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AASA;;;;AA5BA;AACA;AA8BA;;;;A","sourceRoot":""}